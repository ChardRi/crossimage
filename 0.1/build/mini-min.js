/*!build time : 2014-04-16 12:36:57 AM*/
KISSY.add("gallery/crossimage/0.1/cdnPoints",function(){return[{w:16,h:16},{w:20,h:20},{w:24,h:24},{w:30,h:30},{w:32,h:32},{w:36,h:36},{w:40,h:40},{w:48,h:48},{w:50,h:50},{w:60,h:30},{w:60,h:60},{w:60,h:90},{w:64,h:64},{w:70,h:70},{w:70,h:1e3},{w:72,h:72},{w:75,h:100},{w:80,h:40},{w:80,h:60},{w:81,h:65},{w:80,h:80},{w:80,h:1e3},{w:88,h:88},{w:90,h:45},{w:90,h:60},{w:90,h:90},{w:90,h:135},{w:96,h:54},{w:100,h:50},{w:100,h:100},{w:100,h:150},{w:100,h:1e3},{w:110,h:90},{w:110,h:110},{w:110,h:1e4},{w:115,h:100},{w:120,h:60},{w:120,h:90},{w:120,h:120},{w:120,h:160},{w:125,h:125},{w:128,h:128},{w:130,h:130},{w:140,h:70},{w:140,h:100},{w:145,h:145},{w:150,h:150},{w:150,h:200},{w:150,h:1e4},{w:160,h:80},{w:160,h:90},{w:160,h:160},{w:160,h:180},{w:160,h:240},{w:165,h:5e3},{w:170,h:170},{w:170,h:1e4},{w:170,h:120},{w:180,h:90},{w:180,h:180},{w:180,h:230},{w:190,h:43},{w:190,h:190},{w:200,h:100},{w:200,h:200},{w:210,h:140},{w:210,h:210},{w:210,h:1e3},{w:220,h:220},{w:220,h:330},{w:220,h:5e3},{w:220,h:1e4},{w:240,h:5e3},{w:230,h:87},{w:230,h:230},{w:234,h:234},{w:240,h:240},{w:240,h:1e4},{w:250,h:225},{w:250,h:250},{w:264,h:100},{w:270,h:180},{w:270,h:270},{w:280,h:410},{w:290,h:290},{w:290,h:1e4},{w:300,h:1e3},{w:310,h:310},{w:300,h:300},{w:315,h:315},{w:320,h:320},{w:320,h:480},{w:336,h:336},{w:350,h:350},{w:350,h:1e3},{w:360,h:360},{w:400,h:152},{w:400,h:400},{w:420,h:280},{w:430,h:430},{w:450,h:1e4},{w:460,h:460},{w:468,h:468},{w:480,h:420},{w:480,h:480},{w:485,h:175},{w:490,h:330},{w:490,h:490},{w:500,h:450},{w:500,h:1e3},{w:540,h:540},{w:560,h:370},{w:560,h:560},{w:560,h:840},{w:570,h:570},{w:570,h:1e4},{w:580,h:580},{w:580,h:1e4},{w:600,h:600},{w:620,h:1e4},{w:640,h:480},{w:640,h:640},{w:660,h:440},{w:670,h:670},{w:720,h:720},{w:728,h:728},{w:760,h:760},{w:790,h:420},{w:790,h:1e4},{w:960,h:960},{w:970,h:970},{w:1e4,h:220},{w:1e4,h:340},{w:1e4,h:170},{w:1e4,h:500}]}),KISSY.add("gallery/crossimage/0.1/cdnNearest",function(a,b){var c=b,d=function(a,b){return Math.min(Math.abs(a.w-b.w),Math.abs(a.h-b.h))};return function(a){if(a&&a.w&&a.h){for(var b={w:0,h:0},e=1e6,f=0;f<c.length;f++){var g=c[f];if(g.w>=a.w&&g.h>=a.h){var h=d(g,a);e>h&&(e=h,b=g)}}return b}}},{requires:["./cdnPoints"]}),KISSY.add("gallery/crossimage/0.1/webp",function(){return function(){function a(a){if(!window.chrome&&!window.opera)return void a(!1);var c=window.localStorage&&window.localStorage.getItem("webpsupport");return null!==c?void a("true"===c):void b(function(b){window.localStorage&&window.localStorage.setItem("webpsupport",b),a(b)})}function b(a){var b=new Image;b.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",b.onload=b.onerror=function(){a(b.width>0&&b.height>0)}}this.WebP||(this.WebP={},WebP.isSupport=function(b){return b?void 0===WebP._isSupport?void a(function(a){b(WebP._isSupport=a)}):void b(WebP._isSupport):void 0})}(),window.WebP},{attach:!1,requires:[]}),KISSY.add("gallery/crossimage/0.1/index",function(a,b,c){function d(c){function d(a){if(a.elem&&a.elem.width&&a.elem.height&&a.src&&/http/.test(a.src)&&null===a.elem.getAttribute("ignore-crossimage"))try{var c,d,g,h,i=a.elem,j=i.width*f.config.userPPI,k=i.height*f.config.userPPI,l=a.src,c=l.replace(/_\d+x\d+(q\d+)?\.jpg/g,"").replace(/_q\d+\.jpg/g,"").replace(/_\.webp/,""),m=b({w:j,h:k});m&&m.w&&m.h?(g=m.w,h=m.h,d=c+"_@Wx@Hq@Q.jpg@WEBP".replace(/@W/i,g).replace(/@H/i,h).replace(/@Q/,f.config.quality).replace(/@WEBP/,e)):d=c+"_q@Q.jpg@WEBP".replace(/@Q/,f.config.quality).replace(/@WEBP/,e),a.src=d,f.config&&f.config.debug&&console}catch(n){}}var f=this,g={quality:90,userPPI:window.devicePixelRatio||1};return f.config=a.merge(g,c),d}var e="";return c.isSupport(function(a){e=a?"_.webp":""}),d},{requires:["./cdnNearest","./webp"]}),KISSY.add("gallery/crossimage/0.1/mini",function(a,b){return b},{requires:["./index"]});